# ONES 批量创建任务插件：发布与部署

## 1. 插件能力说明

本插件提供：
1. 在 ONES 中进入插件页面后，按行粘贴任务信息。
2. 一次性批量创建任务到指定项目。
3. 实时展示每条任务的创建结果。

任务输入格式（每行一个）：

```text
标题 | 描述 | 负责人UUID(可空) | 截止日期YYYY-MM-DD(可空)
```

## 2. 部署方式

本插件采用“外部静态站点 + ONES 插件入口”方式。

1. 将 `web/` 目录部署到静态站点（Nginx、OSS、S3、Vercel、Netlify 均可）。
2. 得到访问地址，例如：`https://plugin.example.com/index.html`。
3. 修改 `plugin.yaml` 中两个 `url` 为该地址。

## 3. 在 ONES 开放平台发布

1. 登录 ONES 开放平台开发者后台。
2. 创建插件（或创建新版本）。
3. 上传 `plugin.yaml`。
4. 配置权限并提交审核/发布（按你们组织流程执行）。
5. 在目标组织安装该插件。

## 4. 安装后使用

1. 在 ONES 左侧导航找到“批量建任务”。
2. 填写：
- ONES 域名（如 `https://demo688.ones.pro`）
- OpenAPI Token
- 项目 UUID
- 任务类型 UUID
3. 粘贴批量任务文本。
4. 点击“预览解析”检查数据。
5. 点击“开始创建”。

## 5. 和 ONES 项目管理能力的关系

基于项目管理手册与开放平台能力，本插件重点增强了以下链路：
1. 任务创建：将分散任务一次性入库。
2. 任务分配：支持逐行指定负责人或使用默认负责人。
3. 计划排期：支持写入截止日期，方便后续看板/甘特/迭代追踪。
4. 协作透明：创建结果逐条回显，失败可快速定位并重试。

## 6. 常见问题

1. 返回 401/403：检查 OpenAPI Token 是否有效、权限是否包含项目写入。
2. 返回 404：检查 `API 路径模板` 是否与你们环境一致。
3. 返回字段错误：不同 ONES 环境字段结构可能有差异，请根据实际 OpenAPI 文档调整 `web/app.js` 的 `buildPayload`。
